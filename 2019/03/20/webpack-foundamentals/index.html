<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="王羽彪"><title>webpack foundamentals · 南城旧梦</title><meta name="description" content="Problem with script LoadingHistory of ModulesThe birth of JS modules is the early period nodejs. we share package, run tools, linters, commands. They "><meta name="keywords" content="前端学习 前端总结 笔记 生活 王羽彪"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="../../../../css/style.css"><link rel="stylesheet" href="../../../../css/blog_basic.css"><link rel="stylesheet" href="../../../../css/font-awesome.min.css"><link rel="stylesheet" href="../../../../css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="../../../../images/logo@2x.png" style="width:127px;"><h3 title><a href="/">南城旧梦</a></h3><div class="description"><p>多看、多写、多做总结，寻找价值！</p></div></div></div><ul class="social-links"><li><a href="http://github.com/nanchengjiumeng"><i class="fa fa-github"></i></a></li></ul><div class="tags-links"><a href="/tags/html"><i>html</i></a><a href="/tags/javascript"><i>javascript</i></a><a href="/tags/css"><i>css</i></a><a href="/tags/database"><i>database</i></a><a href="/tags/nodejs"><i>nodejs</i></a><a href="/tags/vue"><i>vue</i></a><a href="/tags/article"><i>article</i></a><a href="/tags/vue vant vant-cli"><i>vue vant vant-cli</i></a><a href="/tags/debug"><i>debug</i></a><a href="/tags/js"><i>js</i></a></div><div class="footer"><div class="by_farbox"></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="navi"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li> <a href="https://topschoolwangyubia.github.io/">旧文章</a></li><li><a href="/about">关于</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><a href="/"><img src="/images/logo.png"></a></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>webpack foundamentals</a></h3></div><div class="post-content"><h1 id="Problem-with-script-Loading"><a href="#Problem-with-script-Loading" class="headerlink" title="Problem with script Loading"></a>Problem with script Loading</h1><h1 id="History-of-Modules"><a href="#History-of-Modules" class="headerlink" title="History of Modules"></a>History of Modules</h1><p>The birth of JS modules is the early period nodejs. we share package, run tools, linters, commands. They took the V8 engine and show it like a binary and giv it a runtime for the server side.</p>
<p>How to run a javascript without DOM, hwo to add a tag Element without HTML Tag.  That is when the birth of CommonJS came. CommonJs has a syntax require, which allows us to inject other pieces of a module into the current module.<br>eg:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//commonjs</span></span><br><span class="line"><span class="comment">// a.js </span></span><br><span class="line"><span class="keyword">const</span>  path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">first, second</span>) =&gt;</span> first/second;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">const</span> divide = <span class="built_in">require</span>(<span class="string">"./a.js"</span>);</span><br><span class="line">exports.add = <span class="function">(<span class="params">first, second</span>) =&gt;</span> first + second;</span><br><span class="line">exports.subtract = <span class="function">(<span class="params">first, second</span>) =&gt;</span> first - second;</span><br><span class="line">exports.divideFn = divide;</span><br><span class="line"></span><br><span class="line"><span class="comment">// c.js</span></span><br><span class="line"><span class="keyword">const</span> &#123;add, subtract&#125; = <span class="built_in">require</span>(<span class="string">"./b.js"</span>);</span><br><span class="line"><span class="keyword">const</span> sum = add(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">// &gt; 3</span></span><br><span class="line"><span class="keyword">const</span> sub = subtract(<span class="number">3</span>,<span class="number">1</span>); <span class="comment">// &gt; 2</span></span><br></pre></td></tr></table></figure>
<p><code>JavaScript = npm + node + modules</code></p>
<p>Every body is starting to write all of their tools, all their scripts , all their utilities in javascripts on node.</p>
<p>But no browser support for CommonJS, we can’t write modules use CommonJS. The resolution algorithm for CommonJS is kinda slow. Is there a solution? we start noticing that also people started to ship their web modules through NPM(NPM is a huge instant. Three years ago, developer had to go to a CDM or a GitHub distro, pull something down, concat it together).</p>
<p>Like Browserify and WebMake, it’s not very popular, but you’ll find out why it’s super important. Their main primise to allow you write CommonJS modules.<br>But then it get bundled, and stripping those statements, and then executed in the same orders so that it works in the Web. We ll started to see different approaches like loaders, or things that like JavaScripts that executes in the browser that’s responsible for going in dynamically realtime fetching different module formats.</p>
<p>CommonJS is just too dynamica of a module format to be able to have really optimized code. The scary thing was not everybody was shipping CommonJs, like we had AMD witch cropped up(it maybe came out of <code>Dojo</code>).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AMD pattern</span></span><br><span class="line">define(<span class="string">'myAwesomeLib'</span>, [<span class="string">'lodash'</span>, <span class="string">'someDep'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">_,someDep</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ... &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Even Omnaco in VS Code is written entirely AMD, but  it do too many dynamic(if moment was jaust shipped in ESM, we wouldn’d have any issues, but with legacy code, we will struggle in logacy code). Something’s also AMD + CommonJS. There`s problems, like it’s too dynamic, the MomentJS scenario.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'loadsh'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...do things</span></span><br><span class="line">    <span class="built_in">module</span>.exports = someLib;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>The syntax is really awkward, non-standard, not even node, nor the browser support it.</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-03-20</span><i class="fa fa-tag"></i><a class="tag" href="/tags/nodejs/" title="nodejs">nodejs </a></div></div></div></div><button class="animated fadeInDown navbar-toggle" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="navbar-collapse" aria-expanded="false"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="table-of-content animated fadeInDown" id="bs-navbar"><h1 class="title">目录</h1><p class="table_level_1"><a href="#Problem-with-script-Loading" class="headerlink" title="Problem with script Loading">Problem with script Loading</a></p><p class="table_level_1"><a href="#History-of-Modules" class="headerlink" title="History of Modules">History of Modules</a></p></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="../../../04/09/Reactive-Programming-introduction/" title="Reactive Programming introduction">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="../../01/npm-scripts/" title="npm scripts">下一篇</a></li></ul></div></div></div></div></div><script src="../../../../js/jquery.js"></script><script src="../../../../js/jquery-migrate-1.2.1.min.js"></script><script src="../../../../js/jquery.appear.js"></script><script src="../../../../js/tableOfContent.js"></script></body></html>